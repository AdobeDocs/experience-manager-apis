"use strict";(self.webpackChunkexperience_manager_apis=self.webpackChunkexperience_manager_apis||[]).push([[233],{65480:function(e,n,a){a.d(n,{Z:function(){return _}});var t=a(15861),s=a(42982),r=a(64687),l=a.n(r),o=a(15007),i=a(95223),c=a(75900),d=a.n(c),p=a(62802),u=a.n(p),m=a(95083),v=a.n(m),g=a(32956),f=a(68457),y=a(53971),w=a(78980),x=a(52078),h=a(24808),b=a(48788),C=a(23766),k=a(47549),Z=a(65034),N=a(11490);var D={name:"1a50hjl",styles:"border:none;padding:0;font-family:'adobe-clean';background:transparent;color:var(--spectrum-global-color-gray-800);text-decoration:underline;cursor:pointer;&:hover{color:var(--spectrum-global-color-gray-900);}"},S={name:"181f1kw",styles:"font-weight:700;color:var(--spectrum-global-color-gray-900)"},z={name:"wwrf8h",styles:"display:flex;flex-direction:column;gap:8px;width:80%"},P={name:"1swkvfk",styles:"padding:0;font-family:'adobe-clean';border:none;background:transparent;margin-left:10px;cursor:pointer;text-decoration:underline;color:rgb(0, 84, 182);&:hover{color:rgb(2, 101, 220);}"},L={name:"1f2v555",styles:"color:var(--spectrum-global-color-gray-900)"},B={name:"1f2v555",styles:"color:var(--spectrum-global-color-gray-900)"},j={name:"ti75j2",styles:"margin:0"},A={name:"a29rn1",styles:"display:flex;text-align:center;align-items:center;gap:10px"},M={name:"181f1kw",styles:"font-weight:700;color:var(--spectrum-global-color-gray-900)"},E={name:"1xg43bt",styles:"display:flex;gap:20px;align-items:baseline"},I={name:"6apepd",styles:"display:flex;flex-direction:column;gap:48px"},_=function e(n){var a,r,c=n.formData,p=n.response,m=n.handleRestart,_=(0,o.useContext)(Z.Z),U=_.getCredentialData,F=_.selectedOrganization,H=U,R=(0,o.useState)(),O=R[0],T=R[1],J=(0,o.useState)(""),G=J[0],W=J[1],X={},q={label:"products",productList:[]};null==H||null===(a=H[e])||void 0===a||a.children.forEach((function(e){var n,a,t=e.type,r=e.props;(X[t]=r,r.children&&t===C._)&&(X[t]=r,null==r||null===(n=r.children)||void 0===n||n.forEach((function(e){var n=e.type,a=e.props;X[n]=a})));t===w.bi&&null!=r&&r.children&&(a=q.productList).push.apply(a,(0,s.Z)([].concat(r.children).map((function(e){var n=e.props;return{label:n.label,icon:n.icon}}))))}));var K=null==q?void 0:q.productList;(0,o.useEffect)((function(){c.Downloads&&V("/console/api/organizations/"+(null==F?void 0:F.id)+"/projects/"+p.projectId+"/workspaces/"+p.workspaceId+"/download",c.Download,c.zipUrl)}),[]);var Q=null==H?void 0:H[e],V=function(){var e=(0,t.Z)(l().mark((function e(n,a,t){var s,r,o,i,c,d,p,m,f,y,w,x,h;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a="download"),T(!0),e.prev=2,e.next=5,v().getBinaryContent(t);case 5:return d=e.sent,p=new Uint8Array(d).buffer,m=new(u()),e.next=10,m.loadAsync(p);case 10:return f=null===(s=window.adobeIMS)||void 0===s||null===(r=s.getTokenFromStorage())||void 0===r?void 0:r.token,y={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+f,"x-api-key":null===(o=window)||void 0===o||null===(i=o.adobeIMS)||void 0===i||null===(c=i.adobeIdData)||void 0===c?void 0:c.client_id}},e.next=14,fetch(n,y);case 14:if(200!==(w=e.sent).status){e.next=26;break}return e.next=18,w.json();case 18:return x=e.sent,m.file("credential.json",JSON.stringify(x)),e.next=22,m.generateAsync({type:"blob"});case 22:h=e.sent,(0,g.saveAs)(h,a+".zip"),e.next=27;break;case 26:console.error("Failed to fetch additional data. Response status:",w.status);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(2),console.error("An error occurred:",e.t0);case 32:return e.prev=32,T(!1),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[2,29,32,35]])})));return function(n,a,t){return e.apply(this,arguments)}}();return(0,i.tZ)("div",{className:d()(null==Q?void 0:Q.className),css:I},(0,i.tZ)("div",{className:d()(null==Q?void 0:Q.className),css:(0,i.iv)("display:flex;flex-direction:column;gap:16px;color:var(--spectrum-global-color-gray-800);width:100%;height:100%;text-align:left;@media screen and (min-width: ",f.xU,") and (max-width: ",f.Ey,"){padding:0;width:100%;}","")},(0,i.tZ)("div",{css:E},(null==Q?void 0:Q.title)&&(0,i.tZ)("h2",{className:"spectrum-Heading spectrum-Heading--sizeL",css:M},null==Q?void 0:Q.title),O&&(0,i.tZ)("div",{css:A},(0,i.tZ)("div",{className:"spectrum-ProgressCircle spectrum-ProgressCircle--indeterminate spectrum-ProgressCircle--small"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-track"}),(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fills"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fillMask1"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fillSubMask1"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fill"}))),(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fillMask2"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fillSubMask2"},(0,i.tZ)("div",{className:"spectrum-ProgressCircle-fill"}))))),(0,i.tZ)("p",{css:j},"Downloading..."))),c.Downloads&&(null==Q?void 0:Q.paragraph)&&(0,i.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeL",css:B},null==Q?void 0:Q.paragraph),c.Downloads&&(0,i.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeS",css:L},"Download not working?",(0,i.tZ)("button",{css:P,onClick:function(){return V("/console/api/organizations/"+(null==F?void 0:F.id)+"/projects/"+p.projectId+"/workspaces/"+p.workspaceId+"/download",c.Download,c.zipUrl)},"data-cy":"restart-download"},"Restart download"))),(0,i.tZ)("div",{css:(0,i.iv)("display:flex;gap:35px;@media screen and (min-width: ",f.xU,") and (max-width: ",f.Ey,"){flex-direction:column;padding-left:0;}","")},(0,i.tZ)("div",{css:(0,i.iv)("display:flex;flex-direction:column;gap:35px;width:50%;@media screen and (min-width: ",f.xU,") and (max-width: ",f.Ey,"){width:100%;}","")},(0,i.tZ)(N.W,{credentialName:c.CredentialName,productList:K,ProductComponent:w.bi,AccessTokenComponent:h.J,DevConsoleLinkComponent:b.A,ClientDetailsComponent:C._,allowedOriginsDetails:c.AllowedOrigins,organizationName:F,response:p,nextButtonLink:null==Q?void 0:Q.nextStepsHref,nextButtonLabel:null==Q?void 0:Q.nextStepsLabel,devConsoleLink:null==Q?void 0:Q.devConsoleDirection,developerConsoleManage:null==Q?void 0:Q.developerConsoleManage,myCredentialFields:X,collapse:null==Q?void 0:Q.isCollapsable}),(0,i.tZ)("div",{css:z},(0,i.tZ)("h4",{className:"spectrum-Heading spectrum-Heading--sizeXS",css:S},"Need another credential"),(0,i.tZ)("p",{className:"spectrum-Body spectrum-Body--sizeS"},(0,i.tZ)("button",{onClick:m,css:D,"data-cy":"Restart-new-credential"},"Restart and create a new credential")))),null!=Q&&Q.children?(0,i.tZ)(k.c,{sideContent:null===(r=X[x.v])||void 0===r?void 0:r.children,SideComp:x.v}):null),G&&(0,i.tZ)(y.F,{variant:"success",message:"Copied to clipboard",disable:1e3,customDisableFunction:W}))}}}]);
//# sourceMappingURL=862bb76f-5d21fb86ee1b9b9dc681.js.map